{"version":3,"file":"ng2-pdf-viewer.mjs","sources":["../../src/app/utils/event-bus-utils.ts","../../src/app/utils/helpers.ts","../../src/app/pdf-viewer/pdf-viewer.component.ts","../../src/app/pdf-viewer/pdf-viewer.module.ts","../../ng2-pdf-viewer.ts"],"sourcesContent":["import { fromEvent, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport type { EventBus } from 'pdfjs-dist/web/pdf_viewer';\r\n\r\n// interface EventBus {\r\n//   on(eventName: string, listener: Function): void;\r\n//   off(eventName: string, listener: Function): void;\r\n//   _listeners: any;\r\n//   dispatch(eventName: string, data: Object): void;\r\n//   _on(eventName: any, listener: any, options?: null): void;\r\n//   _off(eventName: any, listener: any, options?: null): void;\r\n// }\r\n\r\nexport function createEventBus(pdfJsViewer: any, destroy$: Subject<void>) {\r\n  const globalEventBus: EventBus = new pdfJsViewer.EventBus();\r\n  attachDOMEventsToEventBus(globalEventBus, destroy$);\r\n  return globalEventBus;\r\n}\r\n\r\nfunction attachDOMEventsToEventBus(\r\n  eventBus: EventBus,\r\n  destroy$: Subject<void>\r\n): void {\r\n  fromEvent(eventBus, 'documentload')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(() => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('documentload', true, true, {});\r\n      window.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'pagerendered')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ pageNumber, cssTransform, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('pagerendered', true, true, {\r\n        pageNumber,\r\n        cssTransform,\r\n      });\r\n      source.div.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'textlayerrendered')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ pageNumber, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('textlayerrendered', true, true, { pageNumber });\r\n      source.textLayerDiv.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'pagechanging')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ pageNumber, source }: any) => {\r\n      const event = document.createEvent('UIEvents') as any;\r\n      event.initEvent('pagechanging', true, true);\r\n      /* tslint:disable:no-string-literal */\r\n      event['pageNumber'] = pageNumber;\r\n      source.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'pagesinit')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('pagesinit', true, true, null);\r\n      source.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'pagesloaded')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ pagesCount, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('pagesloaded', true, true, { pagesCount });\r\n      source.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'scalechange')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ scale, presetValue, source }: any) => {\r\n      const event = document.createEvent('UIEvents') as any;\r\n      event.initEvent('scalechange', true, true);\r\n      /* tslint:disable:no-string-literal */\r\n      event['scale'] = scale;\r\n      /* tslint:disable:no-string-literal */\r\n      event['presetValue'] = presetValue;\r\n      source.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'updateviewarea')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ location, source }: any) => {\r\n      const event = document.createEvent('UIEvents') as any;\r\n      event.initEvent('updateviewarea', true, true);\r\n      event['location'] = location;\r\n      source.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'find')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(\r\n      ({\r\n        source,\r\n        type,\r\n        query,\r\n        phraseSearch,\r\n        caseSensitive,\r\n        highlightAll,\r\n        findPrevious,\r\n      }: any) => {\r\n        if (source === window) {\r\n          return; // event comes from FirefoxCom, no need to replicate\r\n        }\r\n        const event = document.createEvent('CustomEvent');\r\n        event.initCustomEvent('find' + type, true, true, {\r\n          query,\r\n          phraseSearch,\r\n          caseSensitive,\r\n          highlightAll,\r\n          findPrevious,\r\n        });\r\n        window.dispatchEvent(event);\r\n      }\r\n    );\r\n\r\n  fromEvent(eventBus, 'attachmentsloaded')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ attachmentsCount, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('attachmentsloaded', true, true, {\r\n        attachmentsCount,\r\n      });\r\n      source.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'sidebarviewchanged')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ view, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('sidebarviewchanged', true, true, { view });\r\n      source.outerContainer.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'pagemode')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ mode, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('pagemode', true, true, { mode });\r\n      source.pdfViewer.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'namedaction')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ action, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('namedaction', true, true, { action });\r\n      source.pdfViewer.container.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'presentationmodechanged')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ active, switchInProgress }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('presentationmodechanged', true, true, {\r\n        active,\r\n        switchInProgress,\r\n      });\r\n      window.dispatchEvent(event);\r\n    });\r\n\r\n  fromEvent(eventBus, 'outlineloaded')\r\n    .pipe(takeUntil(destroy$))\r\n    .subscribe(({ outlineCount, source }: any) => {\r\n      const event = document.createEvent('CustomEvent');\r\n      event.initCustomEvent('outlineloaded', true, true, { outlineCount });\r\n      source.container.dispatchEvent(event);\r\n    });\r\n}\r\n","export function assign(obj: any, prop: string, value: any) {\r\n  obj[prop] = value;\r\n}\r\n\r\nexport function isSSR() {\r\n  return typeof window === 'undefined';\r\n}","/**\r\n * Created by vadimdez on 21/06/16.\r\n */\r\nimport {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  ElementRef,\r\n  EventEmitter,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  OnInit,\r\n  OnDestroy,\r\n  ViewChild,\r\n  AfterViewChecked,\r\n  NgZone\r\n} from '@angular/core';\r\nimport { from, fromEvent, Subject } from 'rxjs';\r\nimport { debounceTime, filter, takeUntil } from 'rxjs/operators';\r\nimport * as PDFJS from 'pdfjs-dist';\r\nimport * as PDFJSViewer from 'pdfjs-dist/web/pdf_viewer';\r\n\r\nimport { createEventBus } from '../utils/event-bus-utils';\r\nimport { assign, isSSR } from '../utils/helpers';\r\n\r\nimport type {\r\n  PDFSource,\r\n  PDFPageProxy,\r\n  PDFProgressData,\r\n  PDFDocumentProxy,\r\n  PDFDocumentLoadingTask,\r\n  PDFViewerOptions,\r\n  ZoomScale\r\n} from './typings';\r\nimport { PDFSinglePageViewer } from 'pdfjs-dist/web/pdf_viewer';\r\n\r\nif (!isSSR()) {\r\n  assign(PDFJS, 'verbosity', PDFJS.VerbosityLevel.INFOS);\r\n}\r\n\r\nexport enum RenderTextMode {\r\n  DISABLED,\r\n  ENABLED,\r\n  ENHANCED\r\n}\r\n\r\n@Component({\r\n  selector: 'pdf-viewer',\r\n  template: `\r\n    <div #pdfViewerContainer class=\"ng2-pdf-viewer-container\">\r\n      <div class=\"pdfViewer\"></div>\r\n    </div>\r\n  `,\r\n  styleUrls: ['./pdf-viewer.component.scss']\r\n})\r\nexport class PdfViewerComponent\r\n  implements OnChanges, OnInit, OnDestroy, AfterViewChecked {\r\n  static CSS_UNITS = 96.0 / 72.0;\r\n  static BORDER_WIDTH = 9;\r\n\r\n  @ViewChild('pdfViewerContainer') pdfViewerContainer!: ElementRef<HTMLDivElement>;\r\n\r\n  public eventBus!: PDFJSViewer.EventBus;\r\n  public pdfLinkService!: PDFJSViewer.PDFLinkService;\r\n  public pdfFindController!: PDFJSViewer.PDFFindController;\r\n  public pdfViewer!: PDFJSViewer.PDFViewer | PDFSinglePageViewer;\r\n\r\n  private isVisible = false;\r\n\r\n  private _cMapsUrl =\r\n    typeof PDFJS !== 'undefined'\r\n      ? `https://unpkg.com/pdfjs-dist@${(PDFJS as any).version}/cmaps/`\r\n      : null;\r\n  private _imageResourcesPath =\r\n    typeof PDFJS !== 'undefined'\r\n      ? `https://unpkg.com/pdfjs-dist@${(PDFJS as any).version}/web/images/`\r\n      : undefined;\r\n  private _renderText = true;\r\n  private _renderTextMode: RenderTextMode = RenderTextMode.ENABLED;\r\n  private _stickToPage = false;\r\n  private _originalSize = true;\r\n  private _pdf: PDFDocumentProxy | undefined;\r\n  private _page = 1;\r\n  private _zoom = 1;\r\n  private _zoomScale: ZoomScale = 'page-width';\r\n  private _rotation = 0;\r\n  private _showAll = true;\r\n  private _canAutoResize = true;\r\n  private _fitToPage = false;\r\n  private _externalLinkTarget = 'blank';\r\n  private _showBorders = false;\r\n  private lastLoaded!: string | Uint8Array | PDFSource | null;\r\n  private _latestScrolledPage!: number;\r\n\r\n  private resizeTimeout: number | null = null;\r\n  private pageScrollTimeout: number | null = null;\r\n  private isInitialized = false;\r\n  private loadingTask?: PDFDocumentLoadingTask | null;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  @Output('after-load-complete') afterLoadComplete = new EventEmitter<PDFDocumentProxy>();\r\n  @Output('page-rendered') pageRendered = new EventEmitter<CustomEvent>();\r\n  @Output('pages-initialized') pageInitialized = new EventEmitter<CustomEvent>();\r\n  @Output('text-layer-rendered') textLayerRendered = new EventEmitter<CustomEvent>();\r\n  @Output('error') onError = new EventEmitter<any>();\r\n  @Output('on-progress') onProgress = new EventEmitter<PDFProgressData>();\r\n  @Output() pageChange: EventEmitter<number> = new EventEmitter<number>(true);\r\n  @Input() src?: string | Uint8Array | PDFSource;\r\n\r\n  @Input('c-maps-url')\r\n  set cMapsUrl(cMapsUrl: string) {\r\n    this._cMapsUrl = cMapsUrl;\r\n  }\r\n\r\n  @Input('page')\r\n  set page(_page: number | string | any) {\r\n    _page = parseInt(_page, 10) || 1;\r\n    const originalPage = _page;\r\n\r\n    if (this._pdf) {\r\n      _page = this.getValidPageNumber(_page);\r\n    }\r\n\r\n    this._page = _page;\r\n    if (originalPage !== _page) {\r\n      this.pageChange.emit(_page);\r\n    }\r\n  }\r\n\r\n  @Input('render-text')\r\n  set renderText(renderText: boolean) {\r\n    this._renderText = renderText;\r\n  }\r\n\r\n  @Input('render-text-mode')\r\n  set renderTextMode(renderTextMode: RenderTextMode) {\r\n    this._renderTextMode = renderTextMode;\r\n  }\r\n\r\n  @Input('original-size')\r\n  set originalSize(originalSize: boolean) {\r\n    this._originalSize = originalSize;\r\n  }\r\n\r\n  @Input('show-all')\r\n  set showAll(value: boolean) {\r\n    this._showAll = value;\r\n  }\r\n\r\n  @Input('stick-to-page')\r\n  set stickToPage(value: boolean) {\r\n    this._stickToPage = value;\r\n  }\r\n\r\n  @Input('zoom')\r\n  set zoom(value: number) {\r\n    if (value <= 0) {\r\n      return;\r\n    }\r\n\r\n    this._zoom = value;\r\n  }\r\n\r\n  get zoom() {\r\n    return this._zoom;\r\n  }\r\n\r\n  @Input('zoom-scale')\r\n  set zoomScale(value: ZoomScale) {\r\n    this._zoomScale = value;\r\n  }\r\n\r\n  get zoomScale() {\r\n    return this._zoomScale;\r\n  }\r\n\r\n  @Input('rotation')\r\n  set rotation(value: number) {\r\n    if (!(typeof value === 'number' && value % 90 === 0)) {\r\n      console.warn('Invalid pages rotation angle.');\r\n      return;\r\n    }\r\n\r\n    this._rotation = value;\r\n  }\r\n\r\n  @Input('external-link-target')\r\n  set externalLinkTarget(value: string) {\r\n    this._externalLinkTarget = value;\r\n  }\r\n\r\n  @Input('autoresize')\r\n  set autoresize(value: boolean) {\r\n    this._canAutoResize = Boolean(value);\r\n  }\r\n\r\n  @Input('fit-to-page')\r\n  set fitToPage(value: boolean) {\r\n    this._fitToPage = Boolean(value);\r\n  }\r\n\r\n  @Input('show-borders')\r\n  set showBorders(value: boolean) {\r\n    this._showBorders = Boolean(value);\r\n  }\r\n\r\n  static getLinkTarget(type: string) {\r\n    switch (type) {\r\n      case 'blank':\r\n        return (PDFJSViewer as any).LinkTarget.BLANK;\r\n      case 'none':\r\n        return (PDFJSViewer as any).LinkTarget.NONE;\r\n      case 'self':\r\n        return (PDFJSViewer as any).LinkTarget.SELF;\r\n      case 'parent':\r\n        return (PDFJSViewer as any).LinkTarget.PARENT;\r\n      case 'top':\r\n        return (PDFJSViewer as any).LinkTarget.TOP;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  constructor(private element: ElementRef<HTMLElement>, private ngZone: NgZone) {\r\n    if (isSSR()) {\r\n      return;\r\n    }\r\n\r\n    let pdfWorkerSrc: string;\r\n\r\n    const pdfJsVersion: string = (PDFJS as any).version;\r\n    const versionSpecificPdfWorkerUrl: string = (window as any)[`pdfWorkerSrc${pdfJsVersion}`];\r\n\r\n    if (versionSpecificPdfWorkerUrl) {\r\n      pdfWorkerSrc = versionSpecificPdfWorkerUrl;\r\n    } else if (\r\n      window.hasOwnProperty('pdfWorkerSrc') &&\r\n      typeof (window as any).pdfWorkerSrc === 'string' &&\r\n      (window as any).pdfWorkerSrc\r\n    ) {\r\n      pdfWorkerSrc = (window as any).pdfWorkerSrc;\r\n    } else {\r\n      pdfWorkerSrc = `https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdfJsVersion\r\n        }/legacy/build/pdf.worker.min.js`;\r\n    }\r\n\r\n    assign(PDFJS.GlobalWorkerOptions, 'workerSrc', pdfWorkerSrc);\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    const offset = this.pdfViewerContainer.nativeElement.offsetParent;\r\n\r\n    if (this.isVisible === true && offset == null) {\r\n      this.isVisible = false;\r\n      return;\r\n    }\r\n\r\n    if (this.isVisible === false && offset != null) {\r\n      this.isVisible = true;\r\n\r\n      setTimeout(() => {\r\n        this.initialize();\r\n        this.ngOnChanges({ src: this.src } as any);\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initialize();\r\n    this.setupResizeListener();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.clear();\r\n    this.destroy$.next();\r\n    this.loadingTask = null;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (isSSR() || !this.isVisible) {\r\n      return;\r\n    }\r\n\r\n    if ('src' in changes) {\r\n      this.loadPDF();\r\n    } else if (this._pdf) {\r\n      if ('renderText' in changes) {\r\n        this.pdfViewer.textLayerMode = this._renderText\r\n          ? this._renderTextMode\r\n          : RenderTextMode.DISABLED;\r\n        this.resetPdfDocument();\r\n      } else if ('showAll' in changes) {\r\n        this.setupViewer();\r\n        this.resetPdfDocument();\r\n      }\r\n      if ('page' in changes) {\r\n        const { page } = changes;\r\n        if (page.currentValue === this._latestScrolledPage) {\r\n          return;\r\n        }\r\n\r\n        // New form of page changing: The viewer will now jump to the specified page when it is changed.\r\n        // This behavior is introduced by using the PDFSinglePageViewer\r\n        this.pdfViewer.scrollPageIntoView({ pageNumber: this._page });\r\n      }\r\n\r\n      this.update();\r\n    }\r\n  }\r\n\r\n  public updateSize() {\r\n    from(\r\n      this._pdf!.getPage(\r\n        this.pdfViewer.currentPageNumber\r\n      ) as unknown as Promise<PDFPageProxy>\r\n    )\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (page: PDFPageProxy) => {\r\n          const rotation = this._rotation + page.rotate;\r\n          const viewportWidth =\r\n            (page as any).getViewport({\r\n              scale: this._zoom,\r\n              rotation\r\n            }).width * PdfViewerComponent.CSS_UNITS;\r\n          let scale = this._zoom;\r\n          let stickToPage = true;\r\n\r\n          // Scale the document when it shouldn't be in original size or doesn't fit into the viewport\r\n          if (\r\n            !this._originalSize ||\r\n            (this._fitToPage &&\r\n              viewportWidth > this.pdfViewerContainer.nativeElement.clientWidth)\r\n          ) {\r\n            const viewPort = (page as any).getViewport({ scale: 1, rotation });\r\n            scale = this.getScale(viewPort.width, viewPort.height);\r\n            stickToPage = !this._stickToPage;\r\n          }\r\n\r\n          this.pdfViewer._setScale(scale, stickToPage);\r\n        }\r\n      });\r\n  }\r\n\r\n  public clear() {\r\n    if (this.loadingTask && !this.loadingTask.destroyed) {\r\n      this.loadingTask.destroy();\r\n    }\r\n\r\n    if (this._pdf) {\r\n      this._latestScrolledPage = 0;\r\n      this._pdf.destroy();\r\n      this._pdf = undefined;\r\n    }\r\n\r\n    this.pdfViewer && this.pdfViewer.setDocument(null as any);\r\n    this.pdfLinkService && this.pdfLinkService.setDocument(null, null);\r\n    this.pdfFindController && this.pdfFindController.setDocument(null as any);\r\n  }\r\n\r\n  private getPDFLinkServiceConfig() {\r\n    const linkTarget = PdfViewerComponent.getLinkTarget(this._externalLinkTarget);\r\n\r\n    if (linkTarget) {\r\n      return { externalLinkTarget: linkTarget };\r\n    }\r\n\r\n    return {};\r\n  }\r\n\r\n  private initEventBus() {\r\n    this.eventBus = createEventBus(PDFJSViewer, this.destroy$);\r\n\r\n    fromEvent<CustomEvent>(this.eventBus, 'pagerendered')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe((event) => {\r\n        this.pageRendered.emit(event);\r\n      });\r\n\r\n    fromEvent<CustomEvent>(this.eventBus, 'pagesinit')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe((event) => {\r\n        this.pageInitialized.emit(event);\r\n      });\r\n\r\n    fromEvent(this.eventBus, 'pagechanging')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(({ pageNumber }: any) => {\r\n        if (this.pageScrollTimeout) {\r\n          clearTimeout(this.pageScrollTimeout);\r\n        }\r\n\r\n        this.pageScrollTimeout = window.setTimeout(() => {\r\n          this._latestScrolledPage = pageNumber;\r\n          this.pageChange.emit(pageNumber);\r\n        }, 100);\r\n      });\r\n\r\n    fromEvent<CustomEvent>(this.eventBus, 'textlayerrendered')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe((event) => {\r\n        this.textLayerRendered.emit(event);\r\n      });\r\n  }\r\n\r\n  private initPDFServices() {\r\n    this.pdfLinkService = new PDFJSViewer.PDFLinkService({\r\n      eventBus: this.eventBus,\r\n      ...this.getPDFLinkServiceConfig()\r\n    });\r\n    this.pdfFindController = new PDFJSViewer.PDFFindController({\r\n      eventBus: this.eventBus,\r\n      linkService: this.pdfLinkService,\r\n    });\r\n  }\r\n\r\n  private getPDFOptions(): PDFViewerOptions {\r\n    return {\r\n      eventBus: this.eventBus,\r\n      container: this.element.nativeElement.querySelector('div')!,\r\n      removePageBorders: !this._showBorders,\r\n      linkService: this.pdfLinkService,\r\n      textLayerMode: this._renderText\r\n        ? this._renderTextMode\r\n        : RenderTextMode.DISABLED,\r\n      findController: this.pdfFindController,\r\n      l10n: new PDFJSViewer.GenericL10n('en'),\r\n      imageResourcesPath: this._imageResourcesPath,\r\n    };\r\n  }\r\n\r\n  private setupViewer() {\r\n    assign(PDFJS, 'disableTextLayer', !this._renderText);\r\n\r\n    this.initPDFServices();\r\n\r\n    if (this._showAll) {\r\n      this.pdfViewer = new PDFJSViewer.PDFViewer(this.getPDFOptions());\r\n    } else {\r\n      this.pdfViewer = new PDFJSViewer.PDFSinglePageViewer(this.getPDFOptions());\r\n    }\r\n    this.pdfLinkService.setViewer(this.pdfViewer);\r\n\r\n    this.pdfViewer._currentPageNumber = this._page;\r\n  }\r\n\r\n  private getValidPageNumber(page: number): number {\r\n    if (page < 1) {\r\n      return 1;\r\n    }\r\n\r\n    if (page > this._pdf!.numPages) {\r\n      return this._pdf!.numPages;\r\n    }\r\n\r\n    return page;\r\n  }\r\n\r\n  private getDocumentParams() {\r\n    const srcType = typeof this.src;\r\n\r\n    if (!this._cMapsUrl) {\r\n      return this.src;\r\n    }\r\n\r\n    const params: any = {\r\n      cMapUrl: this._cMapsUrl,\r\n      cMapPacked: true,\r\n      enableXfa: true\r\n    };\r\n\r\n    if (srcType === 'string') {\r\n      params.url = this.src;\r\n    } else if (srcType === 'object') {\r\n      if ((this.src as any).byteLength !== undefined) {\r\n        params.data = this.src;\r\n      } else {\r\n        Object.assign(params, this.src);\r\n      }\r\n    }\r\n\r\n    return params;\r\n  }\r\n\r\n  private loadPDF() {\r\n    if (!this.src) {\r\n      return;\r\n    }\r\n\r\n    if (this.lastLoaded === this.src) {\r\n      this.update();\r\n      return;\r\n    }\r\n\r\n    this.clear();\r\n\r\n    this.setupViewer();\r\n\r\n    this.loadingTask = PDFJS.getDocument(this.getDocumentParams());\r\n\r\n    this.loadingTask!.onProgress = (progressData: PDFProgressData) => {\r\n      this.onProgress.emit(progressData);\r\n    };\r\n\r\n    const src = this.src;\r\n\r\n    from(this.loadingTask!.promise as Promise<PDFDocumentProxy>)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (pdf) => {\r\n          this._pdf = pdf;\r\n          this.lastLoaded = src;\r\n\r\n          this.afterLoadComplete.emit(pdf);\r\n          this.resetPdfDocument();\r\n\r\n          this.update();\r\n        },\r\n        error: (error) => {\r\n          this.lastLoaded = null;\r\n          this.onError.emit(error);\r\n        }\r\n      });\r\n  }\r\n\r\n  private update() {\r\n    this.page = this._page;\r\n\r\n    this.render();\r\n  }\r\n\r\n  private render() {\r\n    this._page = this.getValidPageNumber(this._page);\r\n\r\n    if (\r\n      this._rotation !== 0 ||\r\n      this.pdfViewer.pagesRotation !== this._rotation\r\n    ) {\r\n      setTimeout(() => {\r\n        this.pdfViewer.pagesRotation = this._rotation;\r\n      });\r\n    }\r\n\r\n    if (this._stickToPage) {\r\n      setTimeout(() => {\r\n        this.pdfViewer.currentPageNumber = this._page;\r\n      });\r\n    }\r\n\r\n    this.updateSize();\r\n  }\r\n\r\n  private getScale(viewportWidth: number, viewportHeight: number) {\r\n    const borderSize = this._showBorders ? 2 * PdfViewerComponent.BORDER_WIDTH : 0;\r\n    const pdfContainerWidth = this.pdfViewerContainer.nativeElement.clientWidth - borderSize;\r\n    const pdfContainerHeight = this.pdfViewerContainer.nativeElement.clientHeight - borderSize;\r\n\r\n    if (\r\n      pdfContainerHeight === 0 ||\r\n      viewportHeight === 0 ||\r\n      pdfContainerWidth === 0 ||\r\n      viewportWidth === 0\r\n    ) {\r\n      return 1;\r\n    }\r\n\r\n    let ratio = 1;\r\n    switch (this._zoomScale) {\r\n      case 'page-fit':\r\n        ratio = Math.min(\r\n          pdfContainerHeight / viewportHeight,\r\n          pdfContainerWidth / viewportWidth\r\n        );\r\n        break;\r\n      case 'page-height':\r\n        ratio = pdfContainerHeight / viewportHeight;\r\n        break;\r\n      case 'page-width':\r\n      default:\r\n        ratio = pdfContainerWidth / viewportWidth;\r\n        break;\r\n    }\r\n\r\n    return (this._zoom * ratio) / PdfViewerComponent.CSS_UNITS;\r\n  }\r\n\r\n  private resetPdfDocument() {\r\n    this.pdfLinkService.setDocument(this._pdf, null);\r\n    this.pdfFindController.setDocument(this._pdf!);\r\n    this.pdfViewer.setDocument(this._pdf!);\r\n  }\r\n\r\n  private initialize(): void {\r\n    if (isSSR() || !this.isVisible) {\r\n      return;\r\n    }\r\n\r\n    this.isInitialized = true;\r\n    this.initEventBus();\r\n    this.setupViewer();\r\n  }\r\n\r\n  private setupResizeListener(): void {\r\n    if (isSSR()) {\r\n      return;\r\n    }\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      fromEvent(window, 'resize')\r\n        .pipe(\r\n          debounceTime(100),\r\n          filter(() => this._canAutoResize && !!this._pdf),\r\n          takeUntil(this.destroy$)\r\n        )\r\n        .subscribe(() => {\r\n          this.updateSize();\r\n        });\r\n    });\r\n  }\r\n}\r\n","/**\r\n * Created by vadimdez on 01/11/2016.\r\n */\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { PdfViewerComponent } from './pdf-viewer.component';\r\n\r\nexport * from './typings';\r\n\r\n@NgModule({\r\n  declarations: [PdfViewerComponent],\r\n  exports: [PdfViewerComponent]\r\n})\r\nexport class PdfViewerModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}